version: 2.1
orbs:
  matlab: mathworks/matlab@1
jobs:
  build:
    environment:
      MLM_LICENSE_TOKEN: kapilg@mathworks.com|test_token|AAARAYelzOx0ZtlcbAzLqfVklD1U/WR8wE6UNGVy+kwT+AUq8zWnWvSvchpfeU1s+Ryyj6Wi/fO/elTyIS994z7zbk/TiyNJ/amAZNVKZMQz8SWQplW2fj+fL9uRY7X2meObVT6LA0pzE4QGvKt9wmQKAIsNt1AlcRznzyk82E6bPdWiaw+fjwk
      # MATHWORKS_ACCOUNT: kapilg@mathworks.com
    machine:
      image: ubuntu-2004:202201-02
    steps:
      # - checkout
      - matlab/install
      - run:
          command: |
            echo "$PATH"
            # echo "$MATHWORKS_ACCOUNT"
            matlab-batch pwd
            # mkdir matlabCommandArtifacts
            # echo '<!DOCTYPE html><html><body><h2>HTML Links</h2><p>HTML links are defined with the a tag:</p><a href="https://www.w3schools.com">This is a link</a></body></html>' > matlabCommandArtifacts/myfile.html
            # cd matlabCommandArtifacts
            # ls
            # cat myfile.html
      # - store_artifacts:
      #     path: matlabCommandArtifacts/
      # - matlab/run-tests:
      #     source-folder: code
      #     select-by-folder: tests
      #     code-coverage-html: /matlabTestArtifacts/coverage
      # - store_artifacts:
      #     path: /matlabTestArtifacts/coverage

      # As an alternative to run-tests, you can use run-command to execute a MATLAB script, function, or statement.
      # - matlab/run-command:
      #     command: addpath('code'); results = runtests('IncludeSubfolders', true); assertSuccess(results);
