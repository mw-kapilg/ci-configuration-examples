version: 2.1
orbs:
  matlab: mathworks/matlab@0
jobs:
  build:
    machine:
      image: ubuntu-2004:202201-02
    steps:
      - checkout
      # - matlab/install
      # - matlab/run-command:
      #     command: 'mkdir matlabCommandArtifacts; cd matlabCommandArtifacts; echo abc > myfile.txt'
      - run:
          command: |
            mkdir matlabCommandArtifacts
            echo abc > matlabCommandArtifacts/myfile.txt
            cd matlabCommandArtifacts
            ls
            cat myfile.txt
      - store_artifacts:
          path: /matlabCommandArtifacts/myfile.txt
      # - matlab/run-tests:
      #     source-folder: code
      #     select-by-folder: tests
      #     code-coverage-html: /matlabTestArtifacts/coverage
      # - store_artifacts:
      #     path: /matlabTestArtifacts/coverage

      # As an alternative to run-tests, you can use run-command to execute a MATLAB script, function, or statement.
      # - matlab/run-command:
      #     command: addpath('code'); results = runtests('IncludeSubfolders', true); assertSuccess(results);
